
{% extends "blog/base.html"%}
{% load static %}
{%block content%}
<!--
{% if not user.is_authenticated%}
<a href="{% url 'registration' %}" class="btn btn-primary">Rejestracja</a>
<a href="{% url 'login_to_blog' %}" class="btn btn-primary" >Zaloguj</a>
{%endif%}

{% if user.is_authenticated%}
    <h1>Witaj {{user.username}}</h1>
    <a href="{% url 'logout' %}" class="btn btn-primary">Wyloguj</a>
    <a href="{% url 'profile' user.profile.id %}" class="btn btn-primary">Edytuj profil</a>
    <a href="{% url 'friend_list' user.profile.id %}" class="btn btn-primary">Znajomi 
        {% if not new_friend_request == 0%}
            <div color="red">{{new_friend_request}}</div>
        {%endif%}
    </a>
    <a  href="{% url 'all_chats' %}" class="btn btn-primary">Czat {{new_messages}}</a>
{%endif%}
-->
{% if user.is_authenticated%}

<div class="container background_v1">
    <div class="row">
    {% for profile in profiles%}
        
        <div class="col-sm-12 col-md-6 col-lg-4" >
            <div class="card main_page_card" style="margin-top: 10px;">
                <div class="card-body">
                {% if profile.images%}
                <div style="width: 100%; position:relative;">
                    {%for image in profile.images.all %}
                        {% if forloop.last %}
                            <img src="{{image.image.url}}" class="profile_image">
                            <div class="fake_box"> </div>
                            <br />
                        {%endif%}
                    {%empty%}
                          <img src="{% static 'user.png' %}" class="profile_image">
                          <div class="fake_box"> </div>
                        <br />  
                    {%endfor%}
                </div>
                {%endif%}
                
                <h5 class="card-title">
                {{profile.get_name}}
                
                {% if not profile.gender == None%}
                <small>({{profile.gender}})</small>
                {%endif%}
                </h5>
                <p class="card-text">Wiek: {{profile.get_age}} lat</p>
                <p class="card-text main_page_desc" >
                {% if profile.description %}
                    {{profile.description|truncatechars:70}}
                    {% else %}
                    Brak opisu
                {%  endif   %}
                </p>
                <a href="{%url 'profile' profile.id%}"  class="my-button">Zobacz pełny profil</a>
                </div>
            </div>
        </div>
        
    {%endfor%}
    </div>
    <div class="pagination row">
        {% if profiles.has_previous %}
            <div class="col-md-12 col-lg-2">
            <a class="pagiantion_obj btn btn-light"
             href="?page=1">&laquo; Pierwsze</a>
            </div>
            <div class="col-md-12 col-lg-2">
            <a class="pagiantion_obj btn btn-light"  
            href="?page={{ profiles.previous_page_number }}">Poprzednie</a>
            </div>
        {%else%}
            <div class="pagination_obj col-md-12 col-lg-2" style="height:1px;"></div>
            <div class="pagination_obj col-md-12 col-lg-2" style="height:1px;"></div>
        {% endif %}

        <div class="pagiantion_obj pagination_number col-sm-12 col-md-4" >
            Strona {{ profiles.number }} z {{ profiles.paginator.num_pages }}.
        </div>

        {% if profiles.has_next %}
            <div class="col-md-12 col-lg-2">
            <a class="pagiantion_obj btn btn-light pagiantion_obj" 
            href="?page={{ profiles.next_page_number }}">Następne</a>
            </div>
            <div class="col-md-12 col-lg-2">
            <a class="pagiantion_obj btn btn-light pagiantion_obj" 
            href="?page={{ profiles.paginator.num_pages }}">Ostatnie &raquo;</a>
             </div>
        {% endif %}
    
</div>
</div>
    {%endif%}
{% endblock %}

